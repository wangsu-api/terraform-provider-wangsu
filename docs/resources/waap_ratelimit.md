---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "wangsu_waap_ratelimit Resource - wangsu"
subcategory: "Security"
description: |-
    Use this resource to create a WAAP rate limit rule.
    This resource allows you to create a WAAP rate limit rule.
---

# wangsu_waap_ratelimit (Resource)

Use this resource to create a WAAP rate limit rule.
This resource allows you to create a WAAP rate limit rule.

## Example Usage

```hcl


resource "wangsu_waap_ratelimit" "demo" {
  domain      = "waap.test30.com"
  rule_name   = "web_ip_ua"
  description = "your_description22"
  #   scene = "WEB" // or "API"
  scene = "WEB"
  #   asset_api_id       = "1800805524845170689"
  statistical_item   = "IP_UA" // or other options
  statistical_period = 600
  trigger_threshold  = 1001
  intercept_time     = 601
  #   effective_status = "PERMANENT" // or other options
  effective_status = "WITHOUT" // or other options
  rate_limit_effective {
    effective = ["MON", "FRI"]
    start     = "07:00"
    end       = "18:00"
    timezone  = "17"
  }
  #   action             = "BLOCK" // or other options
  action = "LOG" // or other options

  rate_limit_rule_condition {
    ip_or_ips_conditions {
      match_type = "NOT_EQUAL"
      ip_or_ips  = ["192.168.1.11", "192.168.1.1/22"]
    }
    # WEB 维度才可配置
    /*path_conditions {
      match_type = "EQUAL"
      paths      = ["/p111", "/p211"]
    }*/
    # WEB 维度才可配置
    /*uri_conditions {
      match_type = "EQUAL"
      uri        = ["/uri11", "/uri21"]
    }*/
    # API 维度才可配置
    /*uri_param_conditions {
      match_type  = "EQUAL"
      param_name  = "param11"
      param_value = ["value11", "value21"]
    }*/
    ua_conditions {
      match_type = "EQUAL"
      ua         = ["ua11", "ua21"]
    }
    referer_conditions {
      match_type = "EQUAL"
      referer    = ["referer11", "referer21"]
    }

    header_conditions {
      match_type = "EQUAL"
      key        = "header_key"
      value_list = ["value11", "value21"]
    }
    area_conditions {
      match_type = "EQUAL"
      areas      = ["AI", "AU"]
    }
    status_code_conditions {
      match_type  = "EQUAL"
      status_code = ["200", "500"]
    }
    # WEB 维度才可配置
    /*method_conditions {
      match_type     = "EQUAL"
      request_method = ["GET", "DELETE"]
    }*/
  }
}

data "wangsu_waap_ratelimit" "demo" {
  domain_list = [wangsu_waap_ratelimit.demo.domain]
}
output "waap_ratelimit" {
  value = data.wangsu_waap_ratelimit.demo
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (String) Action.<br/>
NO_USE:Not Used<br/>
LOG:Log<br/>
COOKIE:Cookie verification<br/>
JS_CHECK:Javascript verification<br/>
DELAY:Delay<br/>
BLOCK:Deny<br/>
RESET:Reset Connection<br/>
Custom response ID:Custom response ID<br/>
When there is a status code in the matching condition, the supported actions are Log, Deny,Not Used, and Reset Connection.
- `domain` (String) Hostname.
- `effective_status` (String) Cycle effective status.<br/>
PERMANENT:All time<br/>
WITHOUT:Excluded time<br/>
WITHIN:Selected time
- `intercept_time` (Number) Action duration, unit: seconds.
- `rate_limit_rule_condition` (Block List, Min: 1) Matching conditions. (see [below for nested schema](#nestedblock--rate_limit_rule_condition))
- `rule_name` (String) Rule Name, maximum 50 characters.<br/>
Does not support special characters and spaces.
- `scene` (String) Protected target.<br/>
WEB:Website<br/>
API:API
- `statistical_item` (String) Client identifier.<br/>
IP:Client IP<br/>
IP_UA:Client IP and User-Agent<br/>
COOKIE:Cookie<br/>
IP_COOKIE:Client IP and Cookie<br/>
HEADER:Request Header<br/>
When there is a status code in the matching condition,this client identifier is not supported.<br/>
IP_HEADER:Client IP and Request Header<br/>
When there is a status code in the matching condition,this client identifier is not supported .
- `statistical_period` (Number) Statistics period, unit: seconds.
- `trigger_threshold` (Number) Trigger threshold, unit: times.

### Optional

- `asset_api_id` (String) API ID under API business, multiple separated by ; sign.<br/>
When the protected target is APIThis field is required.
- `description` (String) Description, maximum 200 characters.
- `rate_limit_effective` (Block List) Effective time period.When the effective status is effective within the cycle or not effective within the cycle, this field must have a value. (see [below for nested schema](#nestedblock--rate_limit_effective))
- `statistics_key` (String) Statistical key value.<br/>
When the client identifier is cookie/header value, the corresponding key value needs to be entered.

### Read-Only

- `id` (String) Rule ID.

<a id="nestedblock--rate_limit_rule_condition"></a>
### Nested Schema for `rate_limit_rule_condition`

Optional:

- `area_conditions` (Block List) Geo,match type cannot be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--area_conditions))
- `header_conditions` (Block List) Request Header, match type can be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--header_conditions))
- `ip_or_ips_conditions` (Block List) IP/CIDR, match type cannot be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--ip_or_ips_conditions))
- `method_conditions` (Block List) Request Method.<br/>
When the business scenario is API,this matching condition is not supported. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--method_conditions))
- `path_conditions` (Block List) Path, match type cannot be repeated.<br/>
When the business scenario is API, this matching condition is not supported. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--path_conditions))
- `referer_conditions` (Block List) Referer, match type cannot be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--referer_conditions))
- `scheme_conditions` (Block List) HTTP/S, match type cannot be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--scheme_conditions))
- `status_code_conditions` (Block List) Response Code, match type cannot be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--status_code_conditions))
- `ua_conditions` (Block List) User Agent, match type cannot be repeated. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--ua_conditions))
- `uri_conditions` (Block List) URI, match type cannot be repeated.<br/>
When the business scenario is API, this matching condition is not supported. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--uri_conditions))
- `uri_param_conditions` (Block List) URI ParameterI, match type cannot be repeated.<br/>
When the business scenario is API, this matching condition is not supported. (see [below for nested schema](#nestedblock--rate_limit_rule_condition--uri_param_conditions))

<a id="nestedblock--rate_limit_rule_condition--area_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.area_conditions`

Required:

- `areas` (List of String) Geo.
- `match_type` (String) Match type.<br/>
EQUAL:Equal<br/>
NOT_EQUAL:Does not equal


<a id="nestedblock--rate_limit_rule_condition--header_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.header_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, user agent case sensitive<br/>NOT_EQUAL: Does not equal, user agent case sensitive<br/>CONTAIN: Contains, user agent case insensitive<br/>NOT_CONTAIN: Does not Contains, user agent case insensitive<br/>NONE:Empty or non-existent<br/>REGEX: Regex match, user agent case insensitive<br/>NOT_REGEX: Regular does not match, user agent case insensitive<br/>START_WITH: Starts with, user agent case insensitive<br/>END_WITH: Ends with, user agent case insensitive<br/>WILDCARD: Wildcard matches, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character
- `key` (String) Header name,case insensitive,up to 100 characters.<br/>Example: Accept.
- `value_list` (List of String) Header value.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed.


<a id="nestedblock--rate_limit_rule_condition--ip_or_ips_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.ip_or_ips_conditions`

Required:

- `ip_or_ips` (List of String) IP/CIDR, maximum 300 IP/CIDR.
- `match_type` (String) Match type.<br/>
EQUAL:Equal<br/>
NOT_EQUAL:Does not equal


<a id="nestedblock--rate_limit_rule_condition--method_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.method_conditions`

Required:

- `match_type` (String) Match type.<br/>
EQUAL:Equal<br/>
NOT_EQUAL:Does not equal
- `request_method` (List of String) Request method.<br/>
Supported values: GET/POST/DELETE/PUT/HEAD/OPTIONS/COPY.


<a id="nestedblock--rate_limit_rule_condition--path_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.path_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, user agent case sensitive<br/>NOT_EQUAL: Does not equal, user agent case sensitive<br/>CONTAIN: Contains, user agent case insensitive<br/>NOT_CONTAIN: Does not Contains, user agent case insensitive<br/>REGEX: Regex match, user agent case insensitive<br/>NOT_REGEX: Regular does not match, user agent case insensitive<br/>START_WITH: Starts with, user agent case insensitive<br/>END_WITH: Ends with, user agent case insensitive<br/>WILDCARD: Wildcard matches, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character
- `paths` (List of String) Path.<br/>When match type is EQUAL/NOT_EQUAL/START_WITH/END_WITH, path needs to start with "/", and no parameters.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed. <br/>Example: /test.html.


<a id="nestedblock--rate_limit_rule_condition--referer_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.referer_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, user agent case sensitive<br/>NOT_EQUAL: Does not equal, user agent case sensitive<br/>CONTAIN: Contains, user agent case insensitive<br/>NOT_CONTAIN: Does not Contains, user agent case insensitive<br/>NONE:Empty or non-existent<br/>REGEX: Regex match, user agent case insensitive<br/>NOT_REGEX: Regular does not match, user agent case insensitive<br/>START_WITH: Starts with, user agent case insensitive<br/>END_WITH: Ends with, user agent case insensitive<br/>WILDCARD: Wildcard matches, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character
- `referer` (List of String) Referer.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed. <br/>Example: http://test.com.


<a id="nestedblock--rate_limit_rule_condition--scheme_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.scheme_conditions`

Required:

- `match_type` (String) Match type.<br/>
EQUAL:Equal<br/>
NOT_EQUAL:Does not equal
- `scheme` (List of String) HTTP/S.<br/>
Supported values: HTTP/HTTPS.


<a id="nestedblock--rate_limit_rule_condition--status_code_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.status_code_conditions`

Required:

- `match_type` (String) Match type.<br/>
EQUAL:Equal<br/>
NOT_EQUAL:Does not equal
- `status_code` (List of String) Response Code.


<a id="nestedblock--rate_limit_rule_condition--ua_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.ua_conditions`

Required:

- `match_type` (String) Match type.EQUAL: Equals, user agent Match type.<br/>EQUAL: Equals, user agent case sensitive<br/>NOT_EQUAL: Does not equal, user agent case sensitive<br/>CONTAIN: Contains, user agent case insensitive<br/>NOT_CONTAIN: Does not Contains, user agent case insensitive<br/>NONE:Empty or non-existent<br/>REGEX: Regex match, user agent case insensitive<br/>NOT_REGEX: Regular does not match, user agent case insensitive<br/>START_WITH: Starts with, user agent case insensitive<br/>END_WITH: Ends with, user agent case insensitive<br/>WILDCARD: Wildcard matches, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character
- `ua` (List of String) User agent.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed. <br/>Example: go-Http-client/1.1.


<a id="nestedblock--rate_limit_rule_condition--uri_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.uri_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, user agent case sensitive<br/>NOT_EQUAL: Does not equal, user agent case sensitive<br/>CONTAIN: Contains, user agent case insensitive<br/>NOT_CONTAIN: Does not Contains, user agent case insensitive<br/>REGEX: Regex match, user agent case insensitive<br/>NOT_REGEX: Regular does not match, user agent case insensitive<br/>START_WITH: Starts with, user agent case insensitive<br/>END_WITH: Ends with, user agent case insensitive<br/>WILDCARD: Wildcard matches, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, user agent case insensitive, * represents zero or more arbitrary characters, ? represents any single character
- `uri` (List of String) URI.<br/>When match type is EQUAL/NOT_EQUAL/START_WITH/END_WITH, uri needs to start with "/", and includes parameters.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed. <br/>Example: /test.html?id=1.


<a id="nestedblock--rate_limit_rule_condition--uri_param_conditions"></a>
### Nested Schema for `rate_limit_rule_condition.uri_param_conditions`

Required:

- `match_type` (String) Match type.<br/>
EQUAL:Equals,param value case sensitive<br/>
NOT_EQUAL:Does not equal,param value case sensitive<br/>
CONTAIN:Contains,param value case insensitive<br/>
NOT_CONTAIN:Does not contains,param value case insensitive<br/>
REGEX:Regex match,param value case insensitive<br/>
NONE:Empty or non-existent
- `param_name` (String) Param name,case sensitive,maximum 100 characters.<br/>
Example: id.
- `param_value` (List of String) Param value.



<a id="nestedblock--rate_limit_effective"></a>
### Nested Schema for `rate_limit_effective`

Required:

- `effective` (List of String) Effective.<br/>
MON:Monday<br/>
TUE:Tuesday<br/>
WED:Wednesday<br/>
THU:Thursday<br/>
FRI:Friday<br/>
SAT:Saturday<br/>
SUN:Sunday
- `end` (String) End time, format: HH:mm.
- `start` (String) Start time, format: HH:mm.
- `timezone` (String) Timezone,default value: GTM+8.
