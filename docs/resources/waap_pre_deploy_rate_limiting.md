---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "wangsu_waap_pre_deploy_rate_limiting Resource - wangsu"
subcategory: "Security"
description: |-
  Use this resource to pre-deploy rate limiting configurations.Only configurations with provided parameters will be pre-deployed; configurations without supplied parameters will take effect according to the existing production configuration.
---

# wangsu_waap_pre_deploy_rate_limiting (Resource)

Use this resource to pre-deploy rate limiting configurations.Only configurations with provided parameters will be pre-deployed; configurations without supplied parameters will take effect according to the existing production configuration.

## Example Usage
```hcl
resource "wangsu_waap_pre_deploy_rate_limiting" "demo" {
  domain        = "waap.example.com"
  config_switch = "ON"

  rule_list {
    rule_name          = "example_rule"
    description        = "Example description"
    scene              = "WEB"
    statistical_item   = "IP"
    statistical_period = 60
    trigger_threshold  = 100
    intercept_time     = 300
    effective_status   = "PERMANENT"
    action             = "BLOCK"

    rate_limit_rule_condition {

      method_conditions {
        match_type     = "EQUAL"
        request_method = ["GET", "POST"]
      }

      area_conditions {
        match_type = "NOT_EQUAL"
        areas      = ["US", "CN"]
      }

      ip_or_ips_conditions {
        match_type = "EQUAL"
        ip_or_ips  = ["192.168.1.1", "10.0.0.0/24"]
      }

      uri_conditions {
        match_type = "CONTAIN"
        uri        = ["/api/v1/resource"]
      }

      path_conditions {
        match_type = "START_WITH"
        paths      = ["/path/to/resource"]
      }

      scheme_conditions {
        match_type = "EQUAL"
        scheme     = ["HTTPS"]
      }

      status_code_conditions {
        match_type  = "NOT_EQUAL"
        status_code = ["404", "500"]
      }
    }
  }

  rule_list {
    rule_name          = "example_rule2"
    description        = "Example description2"
    scene              = "WEB"
    statistical_item   = "IP_COOKIE"
    statistics_key     = "SESSION"
    statistical_period = 60
    trigger_threshold  = 100
    intercept_time     = 300
    effective_status   = "WITHIN"
    rate_limit_effective {
      effective = ["MON", "FRI"]
      start     = "07:00"
      end       = "18:00"
      timezone  = "17"
    }
    action = "BLOCK"

    rate_limit_rule_condition {

      ua_conditions {
        match_type = "NOT_CONTAIN"
        ua         = ["curl", "wget"]
      }

      header_conditions {
        match_type = "EQUAL"
        key        = "Content-Type"
        value_list = ["application/json"]
      }

      referer_conditions {
        match_type = "START_WITH"
        referer    = ["https://example.com"]
      }

      ja3_conditions {
        match_type = "EQUAL"
        ja3_list   = ["ja332345678901234567890123456788"]
      }

      ja4_conditions {
        match_type = "EQUAL"
        ja4_list   = ["ja43740600_c43983326036_1b2d6ce873a3"]
      }
    }
  }
}

output "wangsu_waap_pre_deploy_result" {
  value = wangsu_waap_pre_deploy_rate_limiting.demo.host_list
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config_switch` (String) Policy switch.<br/>ON: Enable.<br/>OFF: Disable.
- `domain` (String) Domain list.
- `rule_list` (Block List, Min: 1) Rule list. (see [below for nested schema](#nestedblock--rule_list))

### Read-Only

- `host_list` (List of Object) Host list. (see [below for nested schema](#nestedatt--host_list))
- `id` (String) The ID of this resource.

<a id="nestedblock--rule_list"></a>
### Nested Schema for `rule_list`

Required:

- `action` (String) Action.<br/>NO_USE:Not Used<br/>LOG:Log<br/>COOKIE:Cookie verification<br/>JS_CHECK:Javascript verification<br/>DELAY:Delay<br/>BLOCK:Deny<br/>RESET:Reset Connection<br/>Custom response ID:Custom response ID<br/>When there is a status code in the matching condition, the supported actions are Log, Deny, NO_USE, and Reset, Connection.
- `effective_status` (String) Cycle effective status.<br/>PERMANENT:All time<br/>WITHOUT:Excluded time<br/>WITHIN:Selected time
- `intercept_time` (Number) Action duration, unit: seconds, the range is 10 - 604800.
- `rate_limit_rule_condition` (Block List, Min: 1, Max: 1) Matching conditions. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition))
- `rule_name` (String) Rule Name, maximum 50 characters.<br/>does not support # and & .
- `scene` (String) Protected target.<br/>WEB:Website<br/>API:API
- `statistical_item` (String) Client identifier.<br/>IP:Client IP<br/>IP_UA:Client IP and User-Agent<br/>COOKIE:Cookie<br/>IP_COOKIE:Client IP and Cookie<br/>HEADER:Request Header<br/>When there is a status code in the matching condition,this client identifier is not supported.<br/>IP_HEADER:Client IP and Request Header<br/>When there is a status code in the matching condition,this client identifier is not supported .
- `statistical_period` (Number) Statistics period, unit: seconds, the range is 1 - 3600.
- `trigger_threshold` (Number) Trigger threshold, unit: times.

Optional:

- `asset_api_id` (String) API ID under API business, multiple separated by ; sign.<br/>When the protected target is APIThis field is required.
- `description` (String) Description, maximum 200 characters.
- `rate_limit_effective` (Block List, Max: 1) Effective time period.<br/>When the effective status is effective within the cycle or not effective within the cycle, this field must have a value. (see [below for nested schema](#nestedblock--rule_list--rate_limit_effective))
- `statistics_key` (String) Statistical key value.<br/>When the client identifier is cookie/header value, the corresponding key value needs to be entered.

<a id="nestedblock--rule_list--rate_limit_rule_condition"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition`

Optional:

- `area_conditions` (Block List) Geo, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--area_conditions))
- `header_conditions` (Block List) Request Header, match type can be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--header_conditions))
- `ip_or_ips_conditions` (Block List) IP/CIDR, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--ip_or_ips_conditions))
- `ja3_conditions` (Block List) JA3 Fingerprint, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--ja3_conditions))
- `ja4_conditions` (Block List) JA4 Fingerprint, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--ja4_conditions))
- `method_conditions` (Block List) Request Method.<br/>When the business scenario is API,this matching condition is not supported. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--method_conditions))
- `path_conditions` (Block List) Path, match type cannot be repeated.<br/>When the business scenario is API, this matching condition is not supported. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--path_conditions))
- `referer_conditions` (Block List) Referer, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--referer_conditions))
- `scheme_conditions` (Block List) HTTP/S, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--scheme_conditions))
- `status_code_conditions` (Block List) Response Code, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--status_code_conditions))
- `ua_conditions` (Block List) User Agent, match type cannot be repeated. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--ua_conditions))
- `uri_conditions` (Block List) URI, match type cannot be repeated.<br/>When the business scenario is API, this matching condition is not supported. (see [below for nested schema](#nestedblock--rule_list--rate_limit_rule_condition--uri_conditions))

<a id="nestedblock--rule_list--rate_limit_rule_condition--area_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.area_conditions`

Required:

- `areas` (List of String) Geo.
- `match_type` (String) Match type.<br/>EQUAL:Equals<br/>NOT_EQUAL:Does not equal


<a id="nestedblock--rule_list--rate_limit_rule_condition--header_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.header_conditions`

Required:

- `key` (String) Header name,case insensitive,up to 100 characters.<br/>Example: Accept.
- `match_type` (String) Match type.<br/>EQUAL: Equals, request header values case sensitive.<br/>NOT_EQUAL: Does not equal, request header values case sensitive.<br/>CONTAIN: Contains, request header values case insensitive.<br/>NOT_CONTAIN: Does not Contains, request header values case insensitive.<br/>NONE: Empty or non-existent.<br/>REGEX: Regex match, request header values case insensitive.<br/>NOT_REGEX: Regular does not match, request header values case insensitive.<br/>START_WITH: Starts with, request header values case insensitive<br/>END_WITH: Ends with, request header values case insensitive.<br/>WILDCARD: Wildcard matches, request header values case insensitive,* represents zero or more arbitrary characters, ? represents any single character.<br/>NOT_WILDCARD: Wildcard does not match, request header values case insensitive,* represents zero or more arbitrary characters, ? represents any single character.
- `value_list` (List of String) Header value.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed.


<a id="nestedblock--rule_list--rate_limit_rule_condition--ip_or_ips_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.ip_or_ips_conditions`

Required:

- `ip_or_ips` (List of String) IP/CIDR, maximum 500 IP/CIDR.
- `match_type` (String) Match type.<br/>EQUAL:Equals<br/>NOT_EQUAL:Does not equal


<a id="nestedblock--rule_list--rate_limit_rule_condition--ja3_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.ja3_conditions`

Required:

- `ja3_list` (List of String) JA3 Fingerprint List, maximum 300 JA3 Fingerprint.<br/>When the match type is EQUAL/NOT_EQUAL, each item's character length must be 32 and can only include numbers and lowercase letters.
- `match_type` (String) Match type.<br/>EQUAL: Equals<br/>NOT_EQUAL: Does not equal


<a id="nestedblock--rule_list--rate_limit_rule_condition--ja4_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.ja4_conditions`

Required:

- `ja4_list` (List of String) JA4 Fingerprint List, maximum 300 JA4 Fingerprint.<br/>When the match type is EQUAL/NOT_EQUAL, each item's format must be 10 characters + 12 characters + 12 characters, separated by underscores, and can only include underscores, numbers, and lowercase letters.<br/>When the match type is CONTAIN/NOT_CONTAIN/START_WITH/END_WITH, each item is only allowed to include underscores, numbers, and lowercase letters.<br/>When the match type is WILDCARD/NOT_WILDCARD, each item, aside from  ** and ?, is only allowed to include underscores, numbers, and lowercase letters.
- `match_type` (String) Match type.<br/>EQUAL: Equals<br/>NOT_EQUAL: Does not equal<br/>CONTAIN: Contains<br/>NOT_CONTAIN: Does not Contains<br/>START_WITH: Starts with<br/>END_WITH: Ends with<br/>WILDCARD: Wildcard matches, ** represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, ** represents zero or more arbitrary characters, ? represents any single character


<a id="nestedblock--rule_list--rate_limit_rule_condition--method_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.method_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL:Equals<br/>NOT_EQUAL:Does not equal
- `request_method` (List of String) Request method.<br/>Supported values: GET/POST/DELETE/PUT/HEAD/OPTIONS/COPY.


<a id="nestedblock--rule_list--rate_limit_rule_condition--path_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.path_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, path case sensitive<br/>NOT_EQUAL: Does not equal, path case sensitive<br/>CONTAIN: Contains, path case insensitive<br/>NOT_CONTAIN: Does not Contains, path case insensitive<br/>REGEX: Regex match, path case insensitive<br/>NOT_REGEX: Regular does not match, path case sensitive<br/>START_WITH: Starts with, path case sensitive<br/>END_WITH: Ends with, path case sensitive<br/>WILDCARD: Wildcard matches, path case sensitive,* represents zero or more arbitrary characters, ? represents any single character.<br/>NOT_WILDCARD: Wildcard does not match, path case sensitive,* represents zero or more arbitrary characters, ? represents any single character
- `paths` (List of String) Path.<br/>When match type is EQUAL/NOT_EQUAL/START_WITH/END_WITH, path needs to start with "/", and no parameters.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed.<br/>Example: /test.html.


<a id="nestedblock--rule_list--rate_limit_rule_condition--referer_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.referer_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, referer case sensitive<br/>NOT_EQUAL: Does not equal, referer case sensitive<br/>CONTAIN: Contains, referer case insensitive<br/>NOT_CONTAIN: Does not Contains, referer case insensitive<br/>NONE:Empty or non-existent<br/>REGEX: Regex match, referer case insensitive<br/>NOT_REGEX: Regular does not match, referer case insensitive<br/>START_WITH: Starts with, referer case insensitive<br/>END_WITH: Ends with, referer case insensitive<br/>WILDCARD: Wildcard matches, referer case insensitive,* represents zero or more arbitrary characters, ? represents any single characte<br/>NOT_WILDCARD: Wildcard does not match, referer case insensitive,* represents zero or more arbitrary characters, ? represents any single character
- `referer` (List of String) Referer.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed.<br/>Example: http://test.com.


<a id="nestedblock--rule_list--rate_limit_rule_condition--scheme_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.scheme_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL:Equals<br/>NOT_EQUAL:Does not equal
- `scheme` (List of String) HTTP/S.<br/>Supported values: HTTP/HTTPS.


<a id="nestedblock--rule_list--rate_limit_rule_condition--status_code_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.status_code_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL:Equals<br/>NOT_EQUAL:Does not equal
- `status_code` (List of String) Response Code.


<a id="nestedblock--rule_list--rate_limit_rule_condition--ua_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.ua_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, user agent case sensitive<br/>NOT_EQUAL: Does not equal, user agent case sensitive<br/>CONTAIN: Contains, user agent case insensitive<br/>NOT_CONTAIN: Does not Contains, user agent case insensitive<br/>NONE:Empty or non-existent<br/>REGEX: Regex match, user agent case insensitive<br/>NOT_REGEX: Regular does not match, user agent case insensitive<br/>START_WITH: Starts with, user agent case insensitive<br/>END_WITH: Ends with, user agent case insensitive<br/>WILDCARD: Wildcard matches, user agent case insensitive,* represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, user agent case insensitive,* represents zero or more arbitrary characters, ? represents any single character
- `ua` (List of String) User agent.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed.<br/>Example: go-Http-client/1.1.


<a id="nestedblock--rule_list--rate_limit_rule_condition--uri_conditions"></a>
### Nested Schema for `rule_list.rate_limit_rule_condition.uri_conditions`

Required:

- `match_type` (String) Match type.<br/>EQUAL: Equals, URI case sensitive<br/>NOT_EQUAL: Does not equal, URI case sensitive<br/>CONTAIN: Contains, URI case insensitive<br/>NOT_CONTAIN: Does not Contains, URI case insensitive<br/>REGEX: Regex match, URI case insensitive<br/>NOT_REGEX: Regular does not match, URI case insensitive<br/>START_WITH: Starts with, URI case insensitive<br/>END_WITH: Ends with, URI case insensitive<br/>WILDCARD: Wildcard matches, URI case insensitive,* represents zero or more arbitrary characters, ? represents any single character<br/>NOT_WILDCARD: Wildcard does not match, URI case insensitive,* represents zero or more arbitrary characters, ? represents any single character
- `uri` (List of String) URI.<br/>When match type is EQUAL/NOT_EQUAL/START_WITH/END_WITH, uri needs to start with "/", and includes parameters.<br/>When the match type is REGEX/NOT_REGEX, only one value is allowed.<br/>Example: /test.html?id=1.



<a id="nestedblock--rule_list--rate_limit_effective"></a>
### Nested Schema for `rule_list.rate_limit_effective`

Required:

- `effective` (List of String) Effective.<br/>MON:Monday<br/>TUE:Tuesday<br/>WED:Wednesday<br/>THU:Thursday<br/>FRI:Friday<br/>SAT:Saturday<br/>SUN:Sunday
- `end` (String) End time, format: HH:mm.
- `start` (String) Start time, format: HH:mm.
- `timezone` (String) Timezone,default value: GTM+8.



<a id="nestedatt--host_list"></a>
### Nested Schema for `host_list`

Read-Only:

- `host_address` (String)
- `host_name` (String)
