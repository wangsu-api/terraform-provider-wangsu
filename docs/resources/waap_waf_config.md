---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "wangsu_waap_waf_config Resource - wangsu"
subcategory: "Security"
description: |-
  Use this resource to modify the WAF module configuration of a Domain after initial integration. 
  Before running the apply command for the first time, you need to execute the import command to synchronize the remote configuration with the local environment.
---

# wangsu_waap_waf_config (Resource)

Use this resource to modify the WAF module configuration of a Domain after initial integration. 
Before running the apply command for the first time, you need to execute the import command to synchronize the remote configuration with the local environment.

## Example Usage

```hcl
resource "wangsu_waap_waf_config" "demo" {
  domain = "waap.example.com"
  conf_basic {
    defend_mode      = "BLOCK"
    rule_update_mode = "MANUAL"
  }

  rule_list {
    rule_id = 5002
    mode    = "BLOCK"
  }

  rule_list {
    rule_id = 5003
    mode    = "LOG"
  }


  scan_protection {
    scan_tools_config {
      action = "LOG"
    }

    repeated_violation_config {
      action              = "LOG"
      target              = "IP_JA3"
      period              = 10
      waf_rule_type_count = 11
      block_count         = 12
      duration            = 13
    }

    directory_probing_config {
      action                           = "BLOCK"
      target                           = "IP"
      period                           = 20
      request_count_threshold          = 21
      non_existent_directory_threshold = 22
      rate404_threshold                = 23
      duration                         = 24
    }
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `domain` (String) Domain.

### Optional

- `conf_basic` (Block List, Max: 1) Basic configuration. (see [below for nested schema](#nestedblock--conf_basic))
- `rule_list` (Block List) Rule list. (see [below for nested schema](#nestedblock--rule_list))
- `scan_protection` (Block List, Max: 1) Scan protection configuration. (see [below for nested schema](#nestedblock--scan_protection))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--conf_basic"></a>
### Nested Schema for `conf_basic`

Optional:

- `defend_mode` (String) Protection Mode.<br/>BLOCK: Block the attack request directly.<br/>LOG: Only log the attack request without blocking it.
- `rule_update_mode` (String) Ruleset Mode.<br/>MANUAL: Check Ruleset update and all Recommendations on the Console, decide to apply them or not, all of these must be done by yourself manually.<br/>AUTO: Automatically upgrade the Ruleset to the latest version and apply the Recommendations learned from your website traffic to Exception, which can keep your website with high-level security anytime.


<a id="nestedblock--rule_list"></a>
### Nested Schema for `rule_list`

Required:

- `mode` (String) Rule actions.</br>
BLOCK: Deny request by a default 403 response.</br>
LOG: Log request and continue further detections.</br>
OFF: Select if you do not want a policy take effect.
- `rule_id` (Number) WAF rule ID.


<a id="nestedblock--scan_protection"></a>
### Nested Schema for `scan_protection`

Optional:

- `directory_probing_config` (Block List, Max: 1) Directory probing detection configuration. (see [below for nested schema](#nestedblock--scan_protection--directory_probing_config))
- `repeated_violation_config` (Block List, Max: 1) Repeated violation detection configuration. (see [below for nested schema](#nestedblock--scan_protection--repeated_violation_config))
- `scan_tools_config` (Block List, Max: 1) Scanning tool detection configuration. (see [below for nested schema](#nestedblock--scan_protection--scan_tools_config))

<a id="nestedblock--scan_protection--directory_probing_config"></a>
### Nested Schema for `scan_protection.directory_probing_config`

Optional:

- `action` (String) Action.</br>
NO_USE:Not Used.</br>
LOG:Log.</br>
BLOCK:Deny.
- `duration` (Number) Action duration, in seconds.Allowed values are from 10 to 604800.
- `non_existent_directory_threshold` (Number) Number of non-existent directory requests.Allowed values are from 1 to 500.
- `period` (Number) Time range, in seconds. Allowed values are from 5 to 1800.
- `rate404_threshold` (Number) Proportion of 404 status codes.Allowed values are from 0 to 100.
- `request_count_threshold` (Number) Number of requests.Allowed values are from 1 to 99999.
- `target` (String) Statistical subject. </br>
IP: IP. </br>
IP_JA3: IP and JA3 fingerprint.</br>


<a id="nestedblock--scan_protection--repeated_violation_config"></a>
### Nested Schema for `scan_protection.repeated_violation_config`

Optional:

- `action` (String) Action.</br>
NO_USE:Not Used.</br>
LOG:Log.</br>
BLOCK:Deny.
- `block_count` (Number) Number of block actions.Allowed values are from 1 to 99999.
- `duration` (Number) Action duration, in seconds.Allowed values are from 10 to 604800.
- `period` (Number) Time range, in seconds. Allowed values are from 5 to 1800.
- `target` (String) Statistical subject.</br>
IP: IP.</br>
IP_JA3: IP and JA3 fingerprint.
- `waf_rule_type_count` (Number) Number of WAF built-in rule triggers.must be greater than 1.


<a id="nestedblock--scan_protection--scan_tools_config"></a>
### Nested Schema for `scan_protection.scan_tools_config`

Optional:

- `action` (String) Action.</br>
NO_USE:Not Used.</br>
LOG:Log.</br>
BLOCK:Deny.
